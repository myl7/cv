name: CI
on:
  push:
    branches:
      - main
jobs:
  ci:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: xu-cheng/latex-action@v2
        with:
          root_file: main.tex
          latexmk_use_lualatex: true
          extra_system_packages: ttf-liberation
      - name: Upload output to WebDAV
        run: curl -X PUT -u "cv-ci:$CURL_PASSWORD" -T main.pdf https://s.myl.moe/public/cv.pdf
        env:
          CURL_PASSWORD: ${{ secrets.CURL_PASSWORD }}
